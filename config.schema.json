{
  "pluginAlias": "KostalInverter",
  "pluginType": "platform",
  "singular": true,
  "customUi": true,
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "type": "string",
        "default": "Kostal Inverter",
        "description": "Name of the Kostal Inverter Platform"
      },
      "language": {
        "title": "Language",
        "type": "string",
        "enum": ["de", "en", "fr", "it", "zh"],
        "default": "de",
        "description": "Language for the user interface"
      },
      "kostal": {
        "title": "Kostal Inverter Connection",
        "type": "object",
        "properties": {
          "host": {
            "title": "IP Address",
            "type": "string",
            "format": "ipv4",
            "description": "IP address of your Kostal inverter",
            "required": true
          },
          "username": {
            "title": "Username",
            "type": "string",
            "default": "pvserver",
            "description": "Username for Kostal inverter (default: pvserver)"
          },
          "password": {
            "title": "Password",
            "type": "string",
            "format": "password",
            "default": "pvwr",
            "description": "Password for Kostal inverter (default: pvwr)"
          },
          "autoDetectModel": {
            "title": "Auto-detect Model",
            "type": "boolean",
            "default": true,
            "description": "Try to automatically detect the inverter model"
          },
          "model": {
            "title": "Inverter Model",
            "type": "string",
            "default": "Plenticore",
            "description": "Inverter model (if auto-detection fails)"
          }
        },
        "required": ["host"]
      },
      "pollingInterval": {
        "title": "Polling Interval",
        "type": "number",
        "default": 30,
        "minimum": 10,
        "maximum": 300,
        "description": "Data polling interval from Kostal inverter in seconds"
      },
      "childBridge": {
        "title": "Enable Child Bridge",
        "type": "boolean",
        "default": false,
        "description": "Run plugin as Child Bridge (recommended for stability)"
      },
      "childBridgePort": {
        "title": "Child Bridge Port",
        "type": "number",
        "default": 8581,
        "minimum": 1000,
        "maximum": 65535,
        "description": "Port for Child Bridge (only when Child Bridge enabled)"
      },
      "childBridgeUsername": {
        "title": "Child Bridge Username",
        "type": "string",
        "default": "0E:16:CA:9B:88:54",
        "description": "Username for Child Bridge (auto-generated)"
      },
      "childBridgePin": {
        "title": "Child Bridge PIN",
        "type": "string",
        "default": "542-50-232",
        "description": "PIN for Child Bridge (auto-generated)"
      },
      "pushNotifications": {
        "title": "Push Notifications",
        "type": "object",
        "properties": {
          "enabled": {
            "title": "Enable Push Notifications",
            "type": "boolean",
            "default": false,
            "description": "Send daily solar reports via push notifications"
          },
          "time": {
            "title": "Notification Time",
            "type": "string",
            "default": "20:00",
            "pattern": "^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$",
            "description": "Time for daily notifications (HH:MM format)"
          },
          "services": {
            "title": "Notification Services",
            "type": "object",
            "properties": {
              "pushover": {
                "title": "Pushover",
                "type": "object",
                "properties": {
                  "enabled": {
                    "title": "Enable Pushover",
                    "type": "boolean",
                    "default": false,
                    "description": "Enable Pushover notifications"
                  },
                  "userKey": {
                    "title": "Pushover User Key",
                    "type": "string",
                    "description": "Your Pushover user key"
                  },
                  "appToken": {
                    "title": "Pushover App Token",
                    "type": "string",
                    "description": "Your Pushover app token"
                  }
                }
              },
              "telegram": {
                "title": "Telegram",
                "type": "object",
                "properties": {
                  "enabled": {
                    "title": "Enable Telegram",
                    "type": "boolean",
                    "default": false,
                    "description": "Enable Telegram notifications"
                  },
                  "botToken": {
                    "title": "Telegram Bot Token",
                    "type": "string",
                    "description": "Your Telegram bot token"
                  },
                  "chatId": {
                    "title": "Telegram Chat ID",
                    "type": "string",
                    "description": "Your Telegram chat ID"
                  }
                }
              },
              "homekit": {
                "title": "HomeKit",
                "type": "object",
                "properties": {
                  "enabled": {
                    "title": "Enable HomeKit Notifications",
                    "type": "boolean",
                    "default": false,
                    "description": "Enable HomeKit notifications"
                  },
                  "accessoryName": {
                    "title": "Notification Accessory Name",
                    "type": "string",
                    "default": "Kostal Solar Report",
                    "description": "Name for the notification accessory"
                  }
                }
              },
              "webhook": {
                "title": "Webhook",
                "type": "object",
                "properties": {
                  "enabled": {
                    "title": "Enable Webhook",
                    "type": "boolean",
                    "default": false,
                    "description": "Enable webhook notifications"
                  },
                  "url": {
                    "title": "Webhook URL",
                    "type": "string",
                    "format": "uri",
                    "description": "Webhook URL for notifications"
                  }
                }
              }
            }
          }
        }
      }
    },
    "required": ["kostal"]
  }
}